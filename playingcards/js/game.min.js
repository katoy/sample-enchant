(function(){var a;a=(function(){function b(c){this.SPRITES=[];if(c){c.preload([b.CARD])}}b.CARD="images/StandardDeck.png";b.WIDTH=71;b.HEIGHT=96;b.SUIT_SIZE=4;b.NUME_SIZE=13;b.CARD_SIZE=b.SUIT_SIZE*b.NUME_SIZE;b.CLUB=1;b.DIAMOND=2;b.HEART=3;b.SPADE=4;b.ACE=1;b.TEN=10;b.JACK=11;b.QUEEN=12;b.KING=13;b.C01=1;b.C02=2;b.C03=3;b.C04=4;b.C05=5;b.C06=6;b.C07=7;b.C08=8;b.C09=9;b.C10=10;b.C11=11;b.C12=12;b.C13=13;b.D01=14;b.D02=15;b.D03=16;b.D04=17;b.D05=18;b.D06=19;b.D07=20;b.D08=21;b.D09=22;b.D10=23;b.D11=24;b.D12=25;b.D13=26;b.H01=27;b.H02=28;b.H03=29;b.H04=30;b.H05=31;b.H06=32;b.H07=33;b.H08=34;b.H09=35;b.H10=36;b.H11=37;b.H12=38;b.H13=39;b.S01=40;b.S02=41;b.S03=42;b.S04=43;b.S05=44;b.S06=45;b.S07=46;b.S08=47;b.S09=48;b.S10=49;b.S11=50;b.S12=51;b.S13=52;b.JOKER=53;b.C1=b.C01;b.C2=b.C02;b.C3=b.C03;b.C4=b.C04;b.C5=b.C05;b.C6=b.C06;b.C7=b.C07;b.C8=b.C08;b.C9=b.C09;b.CT=b.C10;b.CJ=b.C11;b.CQ=b.C12;b.CK=b.C13;b.D1=b.D01;b.D2=b.D02;b.D3=b.D03;b.D4=b.D04;b.D5=b.D05;b.D6=b.D06;b.D7=b.D07;b.D8=b.D08;b.D9=b.D09;b.DT=b.D10;b.DJ=b.D11;b.DQ=b.D12;b.DK=b.D13;b.H1=b.H01;b.H2=b.H02;b.H3=b.H03;b.H4=b.H04;b.H5=b.H05;b.H6=b.H06;b.H7=b.H07;b.H8=b.H08;b.H9=b.H09;b.HT=b.H10;b.HJ=b.H11;b.HQ=b.H12;b.HK=b.C13;b.S1=b.S01;b.S2=b.S02;b.S3=b.S03;b.S4=b.S04;b.S5=b.S05;b.S6=b.S06;b.S7=b.S07;b.S8=b.S08;b.S9=b.S09;b.ST=b.S10;b.SJ=b.S11;b.SQ=b.C12;b.SK=b.C13;b.prototype.getSuit=function(c){if(c===b.JOKER){return 0}if(c<1||b.CARD_SIZE<c){throw"#--- illegal card:"+c}return Math.floor((c-1)/b.NUME_SIZE)+1};b.prototype.getNumber=function(c){if(c===b.JOKER){return 0}if(c<1||b.CARD_SIZE<c){throw"#--- illegal card:"+c}return(c-1)%b.NUME_SIZE+1};b.prototype.getData=function(d,c){if(d===0||c===0){return b.JOKER}if(d<1||b.SUIT_SIZE<d||c<=0||b.NUME_SIZE<c){throw"#--- illegal suit:"+d+", number:"+c}return(d-1)*b.NUME_SIZE+c};b.prototype.num2name=function(f,c){var h,g,d,e;if(c==null){c=false}if(f===b.JOKER){return"JOKER"}e=["C","D","H","S"];g=["1","2","3","4","5","6","7","8","9","T","J","Q","K"];d=this.getSuit(f);h=this.getNumber(f);if(c){return""+e[d-1]+h}else{return""+e[d-1]+g[h-1]}};b.prototype.num2longname=function(e){var g,f,c,d;if(e===b.JOKER){return"JOKER"}d=["Clubs","Diamonds","Hearts","Spades"];f=["1","2","3","4","5","6","7","8","9","10","Jack","Queen","King"];c=this.getSuit(e);g=this.getNumber(e);return""+f[g-1]+" of "+d[c-1]};b.prototype.name2num=function(c){var f,i,h,g,d,e;if(c==="JOKER"){return b.JOKER}e={C:1,D:2,H:3,S:4};h={"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,T:10,J:11,Q:12,K:13};g={"01":1,"02":2,"03":3,"04":4,"05":5,"06":6,"07":7,"08":8,"09":9,"10":10,"11":11,"12":12,"13":13};f=c.split("");d=e[f[0]];i=null;if(f.length===2){i=h[""+f[1]]}else{if(f.length===3){i=h[""+f[1]];i=g[""+f[1]+f[2]]}}if(d===null||i===null){throw"#--- illegal name "+c}return(d-1)*b.NUME_SIZE+i};b.prototype.getSprite=function(f){var c,e,d;if((f<1||b.CARD_SIZE<f)&&(f!==b.JOKER)){throw"#--- illegal data:"+f}if(this.SPRITES.length===0){for(c=e=1,d=b.CARD_SIZE+1;1<=d?e<=d:e>=d;c=1<=d?++e:--e){this.SPRITES.push(this._getSprite(c))}}return this.SPRITES[f-1]};b.prototype._getSprite=function(g){var e,d,f,c,h;f=b.WIDTH;d=b.HEIGHT;e=new Sprite(f,d);e.image=new Surface(f*2,d);e.data=g;e.name=this.num2name(g,true);c=g===b.JOKER?0:(this.getNumber(g)-1)*(f+1);h=g===b.JOKER?4*(d+1):(this.getSuit(g)-1)*(d+1);e.image.draw(enchant.Game.instance.assets[b.CARD],c,h,f,d,0,0,f,d);c=5*(f+1);h=4*(d+1);e.image.draw(enchant.Game.instance.assets[b.CARD],c,h,f,d,f,0,f,d);return e};b.prototype.deck=function(){var c,d,f,e;c=[];for(d=f=1,e=b.CARD_SIZE;1<=e?f<=e:f>=e;d=1<=e?++f:--f){c.push(d)}return c};b.prototype.shuffle=function(f){var e,c,d;e=f.length;while(e){c=Math.floor(Math.random()*e,10);d=f[--e];f[e]=f[c];f[c]=d}return f};return b})();enchant();window.onload=function(){var c,b;b=new Core(a.WIDTH*13,a.HEIGHT*5);c=new a(b);b.onload=function(){var e,d,i,f,h,g;for(f=h=1;h<=4;f=++h){for(i=g=1;g<=13;i=++g){e=c.getSprite((f-1)*13+i);e.x=a.WIDTH*(i-1);e.y=a.HEIGHT*(f-1);b.rootScene.addChild(e);e.addEventListener("touchend",function(){this.frame=this.frame===0?1:0;return alert("clicked "+this.name)})}}e=c.getSprite(a.JOKER);e.x=a.WIDTH*0;e.y=a.HEIGHT*4;e.frame=1;b.rootScene.addChild(e);e.addEventListener("touchend",function(){this.frame=this.frame===0?1:0;return alert("clicked "+this.name)});d=c.deck();console.log(d.join(","));d=c.shuffle(d);console.log(d.join(","));console.log("C1  = "+(c.name2num("C1")));console.log("CK  = "+(c.name2num("CK")));console.log("SK  = "+(c.name2num("SK")));console.log("C01 = "+(c.name2num("C01")));console.log("C13 = "+(c.name2num("C13")));console.log("S13 = "+(c.name2num("S13")));console.log("JOKER = "+(c.name2num("JOKER")));console.log(" 1  = "+(c.num2name(1)));console.log("13  = "+(c.num2name(13)));console.log("52  = "+(c.num2name(52)));console.log("53  = "+(c.num2name(53)));console.log(" 1  = "+(c.num2longname(1)));console.log("13  = "+(c.num2longname(13)));console.log("52  = "+(c.num2longname(52)));return console.log("53  = "+(c.num2longname(53)))};return b.start()}}).call(this);